#include <stdio.h>
#include <stdlib.h>
#include <math.h>

int main() {
    int n;
    printf("Donner un nombre : ");
    scanf("%d", &n);

    if (n <= 2) {
        printf("Il n'y a aucun nombre premier inférieur à %d.\n", n);
        return 0;
    }

    // Tableau pour marquer les nombres
    int *estPremier = malloc(n * sizeof(int));

    // Initialisation : tout est supposé premier
    for (int i = 0; i < n; i++)
        estPremier[i] = 1;

    estPremier[0] = estPremier[1] = 0; // 0 et 1 ne sont pas premiers

    // Crible d'Ératosthène
    for (int i = 2; i <= sqrt(n); i++) {
        if (estPremier[i]) {
            for (int j = i * i; j < n; j += i)
                estPremier[j] = 0;
        }
    }

    printf("Nombres premiers inférieurs à %d :\n", n);

    for (int i = 2; i < n; i++) {
        if (estPremier[i])
            printf("%d ", i);
    }

    printf("\n");

    free(estPremier);

    return 0;
}
